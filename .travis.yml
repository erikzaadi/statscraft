language: go
matrix:
  - GOPATH=$TRAVIS_BUILD_DIR/gosrc
sudo: false
cache:
  directories:
    - "$GOPATH/src"
install: 
  - mkdir -p "$TRAVIS_BUILD_DIR/gosrc"
  - go get -v github.com/spf13/hugo
script: ./travis.sh
after_success: find public \( -iname '*.html' -o -iname '*.css' -o -iname '*.js' \) -exec gzip -9 -n {} \; -exec mv {}.gz {} \;
deploy:
  - provider: s3
    access_key_id:
      secure: mwTo9YTyPA6kyPWcGOt02s8kapASS/IvyVu0OwLs8tj/6obcYZB7kvELvO0z4fMqb+FvjxJfqllM2YxXwWmZJOb8cIIkEz/BuogFLu+BopMhz9AvCShq3sCXqb+QnuUEJKwlSuFSTDSpZlvZLoc3P7P9hL8HZwhPvra8TVznml0UbVcfBr0lyjRr0N5749XcBQPq5132BpDsUPqm90meyXYxpsS3U+492UEaG6EP6ar9/fH/G3fSGGm/jvE3lZEuXkIzWJgpvQakmofk+hcaVDAe0LbbbUkEodBiPBuiib8PRYoJGHIaZinRcP0yIDiYrswUC56XdQhZ4JIXgSFMaGXXeaiuhEbT+nzio2VZxAeW//l6hUzkNF2N/QK4dOPB8trM4B0hfWBhfW32G6gjqy36s4vbxIU53G/DSN4S6yj4BKa39sqMxgflBwYNrjAYpXyFJrJOJMF3QntGZ51qbqD5QdLMwNi/mDVIiW7inAMVRSNHOBo5Ef9nByyNIni5JyZo6n/1khbqVNkJc71JdoOhmevhyP1mTNil7/uf4+3D1/yCkeMpyzIC4x5hoX2ASaFKls/4dybyqcz3SlX9VsFJxEbPFmk6f2PP3e6pTXAMc3nD3lgihQxCUz5sX6dnDE17EU6+cCT6b49CuNo9+IFvCl14BVU+6MUzNZrz2hc=
    secret_access_key:
      secure: f31R+LdgzU7zSBFQ1Rd+j+ennyevLILLWFd+tbm6flP2/pDqGoAxFQJbv+G3s18tjKXyQM8gddy/vDc/KQhnt1LHTBjv3pqRDLPnt6z17pSnYvBXfdtrvGuNCBDjgfzIfh9XrbDXXp53vK/BDuPSQLY0EBvcWxD9xi71FLua6jQSU4R2t1xkCy1yDt4VMXirGDwr+93mRNXEbmAjseZDGLATG6ki0VWjnWLNgea86MrMsIFcQX+bDu6/plwAWAETdt9ftAo1Zs1PDe0eP1Pq29WCMy7HoP/YLd6xbj5IPpXlaJX/VHavuQuKo4mRqy4knYyHTtkO8FbPQG3mwBbpT9OxJOUCigMLsKIh82FDrilVvuLpACy4JUWJs+8EoMy1uCuwFQVm3zSbVFW/pId75FG1KEcw37GyPtoz6yAVDuLYTxzcLdODcVU+j+0TNR5/X6ODWVmM77mCnR6u7ToNBz9e0RtFJWAzX7AhJAT+SfK+VP+szanebUGDVg+Tfo3DLf5+P9Ab/SI6DzlWx+0rAjMvCgTHpxwu2NOO20TK/2m4gw38ub4dvnTe1P0Yb2PkxR5jGT0QCyCnNgMP69lvTc4dmEmnNhoT34AVeAsVO8EBB+wIaCvVW9Hj/2kWAHxwAtbhmotllQ8pTL5h2x0QknrEPGWWfhCuTZ2MqqV5N2g=
    bucket: www.statscraft.org.il
    local_dir: public
    no_cleanup: true
    skip_cleanup: true
    acl: public_read
    detect_encoding: true
    cache_control: "max-age=86400"
    on:
      repo: statscraft/statscraft
      branch: master
    region: eu-west-1
    endpoint: www.statscraft.org.il.s3-eu-west-1.amazonaws.com
  - provider: s3
    access_key_id:
      secure: LzRdDhoqeFgquQop7dCF6b4GeqhxWJVLjrIiKwK8M0bsfCZYz7AVWuvrhBtD+5651m87RhrbkQ+mcVEeKTqI2NZD035MO8R+05Pxb4oAFq4EefgfFy085e/52ERf16X47w57Aa7Oqfp7yEdX2tKswUxLVyWM2vPAB7q57/Z594VLHqvj2DPio1oUDDEFGvd2DicUcy+pz3131bCqeirP/devPxRU4bD7e2rXiv/UMdf2g+kMwXxD9M+y+GuFkM1gWZq4wRfXhgPj84jHRPYhvFKhW6UgOK5d2auhv/LTP2D86+tZGbcs9/BS7p5VgwLSlHjHfjJctr4ZtPSD3BkZdGrl9A8E7pUfovmKhC3aZxt7L8slSGQaIbr4ZS4EJMJXkwel/HohD+HAvHkgiLaHf0w9xFpq2zZaBEF/9XjMF3/RahtAfrzDA0KW4h3lTdowZCi5GMQcSlNU2SVZpa3XKqpFvEzHKWoVSPdTnqWxpjt6GrLM204Wnite7AJTjmUT32l78PMMHTo2eAPB6kz0mHXwx+RwL/qTvskRQpXcQE9GjumIEiymEl++ipJBAKbOXgS3JdM8je02jO4t8pLFUeBl9jDQzs6/qkHIdO/Mdn7ZajkpTANtdxKhaFtwedhnhrs9btiOTlIwPdxDPv440QG6qBfgr3zVVUBlAF2M6Pk=
    secret_access_key:
      secure: WsASViadfF29gztwzOY/rVdCC4916rdsLYYqUSqjrRHecUSg8YHX8f5v+v3JigSG9YRhZL/l/A6ulj4buRxcimdKqAm4+5FsMDAiHepTnl2Ln27YLIN3PeVpAd6OeTFs15bpnpK6vNlagFBG9Szu8BIWgPTX2t9hJkagjXymPBVBHwffffNAknHz4FyDW/XCN7ULPtT3evPIDyghUjceCYQJZSZlC3qMFbPt8W5WtCKYuXzbF1j+4Y3d0TedlXw6XnC6Xhes6hzYSJx8AqmPNhi0yr9Qe/LpV/9ZIxJMaJYYPvmDVpPSmNW3PltgaaeJ1qfYTYPltzZ82AUOAD5ZKafxiFuE2dPd7fndR63G9zShS5iKCIKlUepiDn/r2FXudlwjiaFQg0SygkrkUlm6/duuPDpzQ+Z05JG8V1PpL34s13vsv77dQ94QEHpTGUT8OjEvllxSont2E/Wg9Dg/+nkicYFc/WC0bTx1uMUAoZ7gRMeg8xpIB2vo/V4EpKVrRiX8HEBNCAUsH2/xUmo2JQZDUKAs2lKd0C/FbW/2gHrNBJFOpdplYpAs27K9zAkLtZWXXGhNaNIKU3xy8sRMZdtFJFZsgaGPhY4wNMAT2rLdMQ4TqWUqTxEtAdXxgU/3oAV0VhMn1Hx0KYvrU57ppDUa/49ruP3PhUozUuGt7XU=
    bucket: statscraft-temp
    local_dir: public
    no_cleanup: true
    skip_cleanup: true
    acl: public_read
    detect_encoding: true
    cache_control: "max-age=86400"
    upload-dir: $TRAVIS_BRANCH
    on:
      all_branches: true
      repo: statscraft/statscraft
